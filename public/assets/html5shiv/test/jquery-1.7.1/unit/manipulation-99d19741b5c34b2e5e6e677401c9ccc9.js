module("manipulation",{teardown:moduleTeardown}),Array.prototype.arrayProtoFn=function(){throw"arrayProtoFn should not be called"};var bareObj=function(e){return e},functionReturningObj=function(e){return function(){return e}};test("text()",function(){expect(3);var e='This link has class="blog": Simon Willison\'s Weblog';equal(jQuery("#sap").text(),e,"Check for merged text of more then one element."),equal(jQuery(document.createTextNode("foo")).text(),"foo","Text node was retreived from .text()."),notEqual(jQuery(document).text(),"","Retrieving text for the document retrieves all text (#10724).")});var testText=function(e){expect(4);var t=e("<div><b>Hello</b> cruel world!</div>");equal(jQuery("#foo").text(t)[0].innerHTML.replace(/>/g,"&gt;"),"&lt;div&gt;&lt;b&gt;Hello&lt;/b&gt; cruel world!&lt;/div&gt;","Check escaped text");var n=jQuery("#nonnodes").contents();n.text(e("hi!")),equal(jQuery(n[0]).text(),"hi!","Check node,textnode,comment with text()"),equal(n[1].nodeValue," there ","Check node,textnode,comment with text()"),equal(jQuery("#nonnodes")[0].childNodes.length<3?8:n[2].nodeType,8,"Check node,textnode,comment with text()")};test("text(String)",function(){testText(bareObj)}),test("text(Function)",function(){testText(functionReturningObj)}),test("text(Function) with incoming value",function(){expect(2);var e='This link has class="blog": Simon Willison\'s Weblog';jQuery("#sap").text(function(t,n){return equal(n,e,"Make sure the incoming value is correct."),"foobar"}),equal(jQuery("#sap").text(),"foobar","Check for merged text of more then one element."),QUnit.reset()});var testWrap=function(e){expect(19);var t="Try them out:",n=jQuery("#first").wrap(e("<div class='red'><span></span></div>")).text();equal(t,n,"Check for wrapping of on-the-fly html"),ok(jQuery("#first").parent().parent().is(".red"),"Check if wrapper has class 'red'"),QUnit.reset(),n=jQuery("#first").wrap(e(document.getElementById("empty"))).parent(),ok(n.is("ol"),"Check for element wrapping"),equal(n.text(),t,"Check for element wrapping"),QUnit.reset(),jQuery("#check1").click(function(){var t=this;ok(t.checked,"Checkbox's state is erased after wrap() action, see #769"),jQuery(t).wrap(e("<div id='c1' style='display:none;'></div>")),ok(t.checked,"Checkbox's state is erased after wrap() action, see #769")}).click();var r=jQuery("#nonnodes").contents();r.wrap(e("<i></i>")),equal(jQuery("#nonnodes > i").length,jQuery("#nonnodes")[0].childNodes.length,"Check node,textnode,comment wraps ok"),equal(jQuery("#nonnodes > i").text(),r.text(),"Check node,textnode,comment wraps doesn't hurt text");var a=0;for(var i in jQuery.cache)a++;r=jQuery("<label/>").wrap(e("<li/>")),equal(r[0].nodeName.toUpperCase(),"LABEL","Element is a label"),equal(r[0].parentNode.nodeName.toUpperCase(),"LI","Element has been wrapped");for(i in jQuery.cache)a--;equal(a,0,"No memory leak in jQuery.cache (bug #7165)"),r=jQuery("<span/>").wrap("<div>test</div>"),equal(r[0].previousSibling.nodeType,3,"Make sure the previous node is a text element"),equal(r[0].parentNode.nodeName.toUpperCase(),"DIV","And that we're in the div element."),r=jQuery("<div><span></span></div>").children().wrap("<p></p><div></div>"),equal(r[0].parentNode.parentNode.childNodes.length,1,"There should only be one element wrapping."),equal(r.length,1,"There should only be one element (no cloning)."),equal(r[0].parentNode.nodeName.toUpperCase(),"P","The span should be in the paragraph."),r=jQuery("<span/>").wrap(jQuery("<div></div>")),equal(r[0].parentNode.nodeName.toLowerCase(),"div","Wrapping works."),n=jQuery("<div></div>").click(function(){ok(!0,"Event triggered."),n.unbind(),jQuery(this).unbind()}),r=jQuery("<span/>").wrap(n),equal(r[0].parentNode.nodeName.toLowerCase(),"div","Wrapping works."),r.parent().trigger("click"),QUnit.reset()};test("wrap(String|Element)",function(){testWrap(bareObj)}),test("wrap(Function)",function(){testWrap(functionReturningObj)}),test("wrap(Function) with index (#10177)",function(){var e=0,t=jQuery("#qunit-fixture p");expect(t.length),t.wrap(function(t){return equal(t,e,"Check if the provided index ("+t+") is as expected ("+e+")"),e++,"<div id='wrap_index_'"+t+"'></div>"})}),test("wrap(String) consecutive elements (#10177)",function(){var e=jQuery("#qunit-fixture p");expect(2*e.length),e.wrap("<div class='wrapper'></div>"),e.each(function(){var e=jQuery(this);ok(e.parent().is(".wrapper"),"Check each elements parent is correct (.wrapper)"),equal(e.siblings().length,0,"Each element should be wrapped individually")})});var testWrapAll=function(e){expect(8);var t=jQuery("#firstp")[0].previousSibling,n=jQuery("#firstp,#first")[0].parentNode,r=jQuery("#firstp,#first").wrapAll(e("<div class='red'><div class='tmp'></div></div>"));equal(r.parent().length,1,"Check for wrapping of on-the-fly html"),ok(jQuery("#first").parent().parent().is(".red"),"Check if wrapper has class 'red'"),ok(jQuery("#firstp").parent().parent().is(".red"),"Check if wrapper has class 'red'"),equal(jQuery("#first").parent().parent()[0].previousSibling,t,"Correct Previous Sibling"),equal(jQuery("#first").parent().parent()[0].parentNode,n,"Correct Parent"),QUnit.reset();var t=jQuery("#firstp")[0].previousSibling,n=jQuery("#first")[0].parentNode,r=jQuery("#firstp,#first").wrapAll(e(document.getElementById("empty")));equal(jQuery("#first").parent()[0],jQuery("#firstp").parent()[0],"Same Parent"),equal(jQuery("#first").parent()[0].previousSibling,t,"Correct Previous Sibling"),equal(jQuery("#first").parent()[0].parentNode,n,"Correct Parent")};test("wrapAll(String|Element)",function(){testWrapAll(bareObj)});var testWrapInner=function(e){expect(11);var t=jQuery("#first").children().length;jQuery("#first").wrapInner(e("<div class='red'><div id='tmp'></div></div>")),equal(jQuery("#first").children().length,1,"Only one child"),ok(jQuery("#first").children().is(".red"),"Verify Right Element"),equal(jQuery("#first").children().children().children().length,t,"Verify Elements Intact"),QUnit.reset();var t=jQuery("#first").html("foo<div>test</div><div>test2</div>").children().length;jQuery("#first").wrapInner(e("<div class='red'><div id='tmp'></div></div>")),equal(jQuery("#first").children().length,1,"Only one child"),ok(jQuery("#first").children().is(".red"),"Verify Right Element"),equal(jQuery("#first").children().children().children().length,t,"Verify Elements Intact"),QUnit.reset();var t=jQuery("#first").children().length;jQuery("#first").wrapInner(e(document.getElementById("empty"))),equal(jQuery("#first").children().length,1,"Only one child"),ok(jQuery("#first").children().is("#empty"),"Verify Right Element"),equal(jQuery("#first").children().children().length,t,"Verify Elements Intact");var n=jQuery("<div/>");n.wrapInner(e("<span></span>")),equal(n.children().length,1,"The contents were wrapped."),equal(n.children()[0].nodeName.toLowerCase(),"span","A span was inserted.")};test("wrapInner(String|Element)",function(){testWrapInner(bareObj)}),test("wrapInner(Function)",function(){testWrapInner(functionReturningObj)}),test("unwrap()",function(){expect(9),jQuery("body").append("  <div id='unwrap' style='display: none;'> <div id='unwrap1'> <span class='unwrap'>a</span> <span class='unwrap'>b</span> </div> <div id='unwrap2'> <span class='unwrap'>c</span> <span class='unwrap'>d</span> </div> <div id='unwrap3'> <b><span class='unwrap unwrap3'>e</span></b> <b><span class='unwrap unwrap3'>f</span></b> </div> </div>");var e=jQuery("#unwrap1 > span, #unwrap2 > span").get(),t=jQuery("#unwrap span").get();equal(jQuery("#unwrap1 span").add("#unwrap2 span:first").unwrap().length,3,"make #unwrap1 and #unwrap2 go away"),deepEqual(jQuery("#unwrap > span").get(),e,"all four spans should still exist"),deepEqual(jQuery("#unwrap3 span").unwrap().get(),jQuery("#unwrap3 > span").get(),"make all b in #unwrap3 go away"),deepEqual(jQuery("#unwrap3 span").unwrap().get(),jQuery("#unwrap > span.unwrap3").get(),"make #unwrap3 go away"),deepEqual(jQuery("#unwrap").children().get(),t,"#unwrap only contains 6 child spans"),deepEqual(jQuery("#unwrap > span").unwrap().get(),jQuery("body > span.unwrap").get(),"make the 6 spans become children of body"),deepEqual(jQuery("body > span.unwrap").unwrap().get(),jQuery("body > span.unwrap").get(),"can't unwrap children of body"),deepEqual(jQuery("body > span.unwrap").unwrap().get(),t,"can't unwrap children of body"),deepEqual(jQuery("body > span.unwrap").get(),t,"body contains 6 .unwrap child spans"),jQuery("body > span.unwrap").remove()});var testAppend=function(e){expect(41);var n="Try them out:",r=jQuery("#first").append(e("<b>buga</b>"));equal(r.text(),n+"buga","Check if text appending works"),equal(jQuery("#select3").append(e("<option value='appendTest'>Append Test</option>")).find("option:last-child").attr("value"),"appendTest","Appending html options to select element"),QUnit.reset();var a='This link has class="blog": Simon Willison\'s WeblogTry them out:';jQuery("#sap").append(e(document.getElementById("first"))),equal(jQuery("#sap").text(),a,"Check for appending of element"),QUnit.reset(),a='This link has class="blog": Simon Willison\'s WeblogTry them out:Yahoo',jQuery("#sap").append(e([document.getElementById("first"),document.getElementById("yahoo")])),equal(jQuery("#sap").text(),a,"Check for appending of array of elements"),QUnit.reset(),a='This link has class="blog": Simon Willison\'s WeblogYahooTry them out:',jQuery("#sap").append(e(jQuery("#yahoo, #first"))),equal(jQuery("#sap").text(),a,"Check for appending of jQuery object"),QUnit.reset(),jQuery("#sap").append(e(5)),ok(jQuery("#sap")[0].innerHTML.match(/5$/),"Check for appending a number"),QUnit.reset(),jQuery("#sap").append(e(" text with spaces ")),ok(jQuery("#sap")[0].innerHTML.match(/ text with spaces $/),"Check for appending text with spaces"),QUnit.reset(),ok(jQuery("#sap").append(e([])),"Check for appending an empty array."),ok(jQuery("#sap").append(e("")),"Check for appending an empty string."),ok(jQuery("#sap").append(e(document.getElementsByTagName("foo"))),"Check for appending an empty nodelist."),QUnit.reset(),jQuery("form").append(e("<input name='radiotest' type='radio' checked='checked' />")),jQuery("form input[name=radiotest]").each(function(){ok(jQuery(this).is(":checked"),"Append checked radio")}).remove(),QUnit.reset(),jQuery("form").append(e("<input name='radiotest' type='radio' checked    =   'checked' />")),jQuery("form input[name=radiotest]").each(function(){ok(jQuery(this).is(":checked"),"Append alternately formated checked radio")}).remove(),QUnit.reset(),jQuery("form").append(e("<input name='radiotest' type='radio' checked />")),jQuery("form input[name=radiotest]").each(function(){ok(jQuery(this).is(":checked"),"Append HTML5-formated checked radio")}).remove(),QUnit.reset(),jQuery("#sap").append(e(document.getElementById("form"))),equal(jQuery("#sap>form").size(),1,"Check for appending a form"),QUnit.reset();var i=!0;try{var o=jQuery("#iframe")[0].contentWindow.document.body;i=!1,jQuery(o).append(e("<div>test</div>")),i=!0}catch(l){}ok(i,"Test for appending a DOM node to the contents of an IFrame"),QUnit.reset(),jQuery("<fieldset/>").appendTo("#form").append(e("<legend id='legend'>test</legend>")),t("Append legend","#legend",["legend"]),QUnit.reset(),jQuery("#select1").append(e("<OPTION>Test</OPTION>")),equal(jQuery("#select1 option:last").text(),"Test","Appending &lt;OPTION&gt; (all caps)"),jQuery("#table").append(e("<colgroup></colgroup>")),ok(jQuery("#table colgroup").length,"Append colgroup"),jQuery("#table colgroup").append(e("<col/>")),ok(jQuery("#table colgroup col").length,"Append col"),QUnit.reset(),jQuery("#table").append(e("<caption></caption>")),ok(jQuery("#table caption").length,"Append caption"),QUnit.reset(),jQuery("form:last").append(e("<select id='appendSelect1'></select>")).append(e("<select id='appendSelect2'><option>Test</option></select>")),t("Append Select","#appendSelect1, #appendSelect2",["appendSelect1","appendSelect2"]),equal("Two nodes",jQuery("<div />").append("Two"," nodes").text(),"Appending two text nodes (#4011)");var s=jQuery("#nonnodes").contents(),u=jQuery("<div/>").appendTo("#nonnodes").append(s);equal(jQuery("#nonnodes").length,1,"Check node,textnode,comment append moved leaving just the div"),ok(u.contents().length>=2,"Check node,textnode,comment append works"),u.contents().appendTo("#nonnodes"),u.remove(),ok(jQuery("#nonnodes").contents().length>=2,"Check node,textnode,comment append cleanup worked"),QUnit.reset();var c=jQuery("<input />").attr({type:"checkbox",checked:!0}).appendTo("#testForm");equal(c[0].checked,!0,"A checked checkbox that is appended stays checked"),QUnit.reset();var p=jQuery("input:radio[name='R1']"),d=jQuery("<input type='radio' name='R1' checked='checked'/>").insertAfter(p),h=p.eq(1).click();d[0].checked=!1,p.parent().wrap("<div></div>"),equal(h[0].checked,!0,"Reappending radios uphold which radio is checked"),equal(d[0].checked,!1,"Reappending radios uphold not being checked"),QUnit.reset();var y=jQuery("#sap").children().length;jQuery("#sap").append("<span></span>","<span></span>","<span></span>"),equal(jQuery("#sap").children().length,y+3,"Make sure that multiple arguments works."),QUnit.reset()};test("append(String|Element|Array&lt;Element&gt;|jQuery)",function(){testAppend(bareObj)}),test("append(Function)",function(){testAppend(functionReturningObj)}),test("append(Function) with incoming value",function(){expect(12);var e="Try them out:",t=jQuery("#first").html(),n=jQuery("#first").append(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),"<b>buga</b>"});equal(n.text(),e+"buga","Check if text appending works");var r=jQuery("#select3");t=r.html(),equal(r.append(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),"<option value='appendTest'>Append Test</option>"}).find("option:last-child").attr("value"),"appendTest","Appending html options to select element"),QUnit.reset();var a='This link has class="blog": Simon Willison\'s WeblogTry them out:';t=jQuery("#sap").html(),jQuery("#sap").append(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),document.getElementById("first")}),equal(jQuery("#sap").text(),a,"Check for appending of element"),QUnit.reset(),a='This link has class="blog": Simon Willison\'s WeblogTry them out:Yahoo',t=jQuery("#sap").html(),jQuery("#sap").append(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),[document.getElementById("first"),document.getElementById("yahoo")]}),equal(jQuery("#sap").text(),a,"Check for appending of array of elements"),QUnit.reset(),a='This link has class="blog": Simon Willison\'s WeblogYahooTry them out:',t=jQuery("#sap").html(),jQuery("#sap").append(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),jQuery("#yahoo, #first")}),equal(jQuery("#sap").text(),a,"Check for appending of jQuery object"),QUnit.reset(),t=jQuery("#sap").html(),jQuery("#sap").append(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),5}),ok(jQuery("#sap")[0].innerHTML.match(/5$/),"Check for appending a number"),QUnit.reset()}),test("append the same fragment with events (Bug #6997, 5566)",function(){var e=!jQuery.support.noCloneEvent&&document.fireEvent;expect(2+(e?1:0)),stop();var t;if(e){t=jQuery("div:first").click(function(){ok(!0,"Event exists on original after being unbound on clone"),jQuery(this).unbind("click")});var n=t.clone(!0).unbind("click");n[0].fireEvent("onclick"),t[0].fireEvent("onclick"),n.remove()}t=jQuery("<a class='test6997'></a>").click(function(){ok(!0,"Append second element events work")}),jQuery("#listWithTabIndex li").append(t).find("a.test6997").eq(1).click(),t=jQuery("<li class='test6997'></li>").click(function(){ok(!0,"Before second element events work"),start()}),jQuery("#listWithTabIndex li").before(t),jQuery("#listWithTabIndex li.test6997").eq(1).click()}),test("append HTML5 sectioning elements (Bug #6485)",function(){expect(2),jQuery("#qunit-fixture").append("<article style='font-size:10px'><section><aside>HTML5 elements</aside></section></article>");var e=jQuery("article"),t=jQuery("aside");equal(e.css("fontSize"),"10px","HTML5 elements are styleable"),equal(t.length,1,"HTML5 elements do not collapse their children")}),test("HTML5 Elements inherit styles from style rules (Bug #10501)",function(){expect(1),jQuery("#qunit-fixture").append("<article id='article'></article>"),jQuery("#article").append("<section>This section should have a pink background.</section>"),notEqual(jQuery("section").css("background-color"),"transparent","HTML5 elements inherit styles")}),test("html5 clone() cannot use the fragment cache in IE (#6485)",function(){expect(1),jQuery("<article><section><aside>HTML5 elements</aside></section></article>").appendTo("#qunit-fixture");var e=jQuery("article").clone();jQuery("#qunit-fixture").append(e),equal(jQuery("aside").length,2,"clone()ing HTML5 elems does not collapse them")}),test("html(String) with HTML5 (Bug #6485)",function(){expect(2),jQuery("#qunit-fixture").html("<article><section><aside>HTML5 elements</aside></section></article>"),equal(jQuery("#qunit-fixture").children().children().length,1,"Make sure HTML5 article elements can hold children. innerHTML shortcut path"),equal(jQuery("#qunit-fixture").children().children().children().length,1,"Make sure nested HTML5 elements can hold children.")}),test("append(xml)",function(){function e(){var e,t=["MSXML6.DomDocument","MSXML3.DomDocument","MSXML2.DomDocument","MSXML.DomDocument","Microsoft.XmlDom"];if(document.implementation&&"createDocument"in document.implementation)return document.implementation.createDocument("","",null);for(var n=0,r=t.length;r>n;n++)try{return e=new ActiveXObject(t[n])}catch(a){}}expect(1);var t=e(),n=t.createElement("head"),r=t.createElement("test");ok(jQuery(n).append(r),"Append an xml element to another without raising an exception.")}),test("appendTo(String|Element|Array&lt;Element&gt;|jQuery)",function(){expect(17);var e="Try them out:";jQuery("<b>buga</b>").appendTo("#first"),equal(jQuery("#first").text(),e+"buga","Check if text appending works"),equal(jQuery("<option value='appendTest'>Append Test</option>").appendTo("#select3").parent().find("option:last-child").attr("value"),"appendTest","Appending html options to select element"),QUnit.reset();var n=jQuery("#first").children().length+2;jQuery("<strong>test</strong>"),jQuery("<strong>test</strong>"),jQuery([jQuery("<strong>test</strong>")[0],jQuery("<strong>test</strong>")[0]]).appendTo("#first"),equal(jQuery("#first").children().length,n,"Make sure the elements were inserted."),equal(jQuery("#first").children().last()[0].nodeName.toLowerCase(),"strong","Verify the last element."),QUnit.reset();var r='This link has class="blog": Simon Willison\'s WeblogTry them out:';jQuery(document.getElementById("first")).appendTo("#sap"),equal(jQuery("#sap").text(),r,"Check for appending of element"),QUnit.reset(),r='This link has class="blog": Simon Willison\'s WeblogTry them out:Yahoo',jQuery([document.getElementById("first"),document.getElementById("yahoo")]).appendTo("#sap"),equal(jQuery("#sap").text(),r,"Check for appending of array of elements"),QUnit.reset(),ok(jQuery(document.createElement("script")).appendTo("body").length,"Make sure a disconnected script can be appended."),QUnit.reset(),r='This link has class="blog": Simon Willison\'s WeblogYahooTry them out:',jQuery("#yahoo, #first").appendTo("#sap"),equal(jQuery("#sap").text(),r,"Check for appending of jQuery object"),QUnit.reset(),jQuery("#select1").appendTo("#foo"),t("Append select","#foo select",["select1"]),QUnit.reset();var a=jQuery("<div/>").click(function(){ok(!0,"Running a cloned click.")});a.appendTo("#qunit-fixture, #moretests"),jQuery("#qunit-fixture div:last").click(),jQuery("#moretests div:last").click(),QUnit.reset(),a=jQuery("<div/>").appendTo("#qunit-fixture, #moretests"),equal(a.length,2,"appendTo returns the inserted elements"),a.addClass("test"),ok(jQuery("#qunit-fixture div:last").hasClass("test"),"appendTo element was modified after the insertion"),ok(jQuery("#moretests div:last").hasClass("test"),"appendTo element was modified after the insertion"),QUnit.reset(),a=jQuery("<div/>"),jQuery("<span>a</span><b>b</b>").filter("span").appendTo(a),equal(a.children().length,1,"Make sure the right number of children were inserted."),a=jQuery("#moretests div");var i=jQuery("#qunit-fixture div").length;a.remove().appendTo("#qunit-fixture"),equal(jQuery("#qunit-fixture div").length,i,"Make sure all the removed divs were inserted."),QUnit.reset(),stop(),jQuery.getScript("data/test.js",function(){jQuery('script[src*="data\\/test\\.js"]').remove(),start()})});var testPrepend=function(e){expect(5);var t="Try them out:",n=jQuery("#first").prepend(e("<b>buga</b>"));equal(n.text(),"buga"+t,"Check if text prepending works"),equal(jQuery("#select3").prepend(e("<option value='prependTest'>Prepend Test</option>")).find("option:first-child").attr("value"),"prependTest","Prepending html options to select element"),QUnit.reset();var r='Try them out:This link has class="blog": Simon Willison\'s Weblog';jQuery("#sap").prepend(e(document.getElementById("first"))),equal(jQuery("#sap").text(),r,"Check for prepending of element"),QUnit.reset(),r='Try them out:YahooThis link has class="blog": Simon Willison\'s Weblog',jQuery("#sap").prepend(e([document.getElementById("first"),document.getElementById("yahoo")])),equal(jQuery("#sap").text(),r,"Check for prepending of array of elements"),QUnit.reset(),r='YahooTry them out:This link has class="blog": Simon Willison\'s Weblog',jQuery("#sap").prepend(e(jQuery("#yahoo, #first"))),equal(jQuery("#sap").text(),r,"Check for prepending of jQuery object")};test("prepend(String|Element|Array&lt;Element&gt;|jQuery)",function(){testPrepend(bareObj)}),test("prepend(Function)",function(){testPrepend(functionReturningObj)}),test("prepend(Function) with incoming value",function(){expect(10);var e="Try them out:",t=jQuery("#first").html(),n=jQuery("#first").prepend(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),"<b>buga</b>"});equal(n.text(),"buga"+e,"Check if text prepending works"),t=jQuery("#select3").html(),equal(jQuery("#select3").prepend(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),"<option value='prependTest'>Prepend Test</option>"}).find("option:first-child").attr("value"),"prependTest","Prepending html options to select element"),QUnit.reset();var r='Try them out:This link has class="blog": Simon Willison\'s Weblog';t=jQuery("#sap").html(),jQuery("#sap").prepend(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),document.getElementById("first")}),equal(jQuery("#sap").text(),r,"Check for prepending of element"),QUnit.reset(),r='Try them out:YahooThis link has class="blog": Simon Willison\'s Weblog',t=jQuery("#sap").html(),jQuery("#sap").prepend(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),[document.getElementById("first"),document.getElementById("yahoo")]}),equal(jQuery("#sap").text(),r,"Check for prepending of array of elements"),QUnit.reset(),r='YahooTry them out:This link has class="blog": Simon Willison\'s Weblog',t=jQuery("#sap").html(),jQuery("#sap").prepend(function(e,n){return equal(n,t,"Make sure the incoming value is correct."),jQuery("#yahoo, #first")}),equal(jQuery("#sap").text(),r,"Check for prepending of jQuery object")}),test("prependTo(String|Element|Array&lt;Element&gt;|jQuery)",function(){expect(6);var e="Try them out:";jQuery("<b>buga</b>").prependTo("#first"),equal(jQuery("#first").text(),"buga"+e,"Check if text prepending works"),equal(jQuery("<option value='prependTest'>Prepend Test</option>").prependTo("#select3").parent().find("option:first-child").attr("value"),"prependTest","Prepending html options to select element"),QUnit.reset();var n='Try them out:This link has class="blog": Simon Willison\'s Weblog';jQuery(document.getElementById("first")).prependTo("#sap"),equal(jQuery("#sap").text(),n,"Check for prepending of element"),QUnit.reset(),n='Try them out:YahooThis link has class="blog": Simon Willison\'s Weblog',jQuery([document.getElementById("first"),document.getElementById("yahoo")]).prependTo("#sap"),equal(jQuery("#sap").text(),n,"Check for prepending of array of elements"),QUnit.reset(),n='YahooTry them out:This link has class="blog": Simon Willison\'s Weblog',jQuery("#yahoo, #first").prependTo("#sap"),equal(jQuery("#sap").text(),n,"Check for prepending of jQuery object"),QUnit.reset(),jQuery("<select id='prependSelect1'></select>").prependTo("form:last"),jQuery("<select id='prependSelect2'><option>Test</option></select>").prependTo("form:last"),t("Prepend Select","#prependSelect2, #prependSelect1",["prependSelect2","prependSelect1"])});var testBefore=function(e){expect(6);var t="This is a normal link: bugaYahoo";jQuery("#yahoo").before(e("<b>buga</b>")),equal(jQuery("#en").text(),t,"Insert String before"),QUnit.reset(),t="This is a normal link: Try them out:Yahoo",jQuery("#yahoo").before(e(document.getElementById("first"))),equal(jQuery("#en").text(),t,"Insert element before"),QUnit.reset(),t="This is a normal link: Try them out:diveintomarkYahoo",jQuery("#yahoo").before(e([document.getElementById("first"),document.getElementById("mark")])),equal(jQuery("#en").text(),t,"Insert array of elements before"),QUnit.reset(),t="This is a normal link: diveintomarkTry them out:Yahoo",jQuery("#yahoo").before(e(jQuery("#mark, #first"))),equal(jQuery("#en").text(),t,"Insert jQuery before");var n=jQuery("<div/>").before("<span>test</span>");equal(n[0].nodeName.toLowerCase(),"span","Insert the element before the disconnected node."),equal(n.length,2,"Insert the element before the disconnected node.")};test("before(String|Element|Array&lt;Element&gt;|jQuery)",function(){testBefore(bareObj)}),test("before(Function)",function(){testBefore(functionReturningObj)}),test("before and after w/ empty object (#10812)",function(){expect(2);var e=jQuery("#notInTheDocument").before("(").after(")");equal(e.length,2,"didn't choke on empty object"),equal(e.wrapAll("<div/>").parent().text(),"()","correctly appended text")}),test("insertBefore(String|Element|Array&lt;Element&gt;|jQuery)",function(){expect(4);var e="This is a normal link: bugaYahoo";jQuery("<b>buga</b>").insertBefore("#yahoo"),equal(jQuery("#en").text(),e,"Insert String before"),QUnit.reset(),e="This is a normal link: Try them out:Yahoo",jQuery(document.getElementById("first")).insertBefore("#yahoo"),equal(jQuery("#en").text(),e,"Insert element before"),QUnit.reset(),e="This is a normal link: Try them out:diveintomarkYahoo",jQuery([document.getElementById("first"),document.getElementById("mark")]).insertBefore("#yahoo"),equal(jQuery("#en").text(),e,"Insert array of elements before"),QUnit.reset(),e="This is a normal link: diveintomarkTry them out:Yahoo",jQuery("#mark, #first").insertBefore("#yahoo"),equal(jQuery("#en").text(),e,"Insert jQuery before")});var testAfter=function(e){expect(6);var t="This is a normal link: Yahoobuga";jQuery("#yahoo").after(e("<b>buga</b>")),equal(jQuery("#en").text(),t,"Insert String after"),QUnit.reset(),t="This is a normal link: YahooTry them out:",jQuery("#yahoo").after(e(document.getElementById("first"))),equal(jQuery("#en").text(),t,"Insert element after"),QUnit.reset(),t="This is a normal link: YahooTry them out:diveintomark",jQuery("#yahoo").after(e([document.getElementById("first"),document.getElementById("mark")])),equal(jQuery("#en").text(),t,"Insert array of elements after"),QUnit.reset(),t="This is a normal link: YahoodiveintomarkTry them out:",jQuery("#yahoo").after(e(jQuery("#mark, #first"))),equal(jQuery("#en").text(),t,"Insert jQuery after");var n=jQuery("<div/>").after("<span>test</span>");equal(n[1].nodeName.toLowerCase(),"span","Insert the element after the disconnected node."),equal(n.length,2,"Insert the element after the disconnected node.")};test("after(String|Element|Array&lt;Element&gt;|jQuery)",function(){testAfter(bareObj)}),test("after(Function)",function(){testAfter(functionReturningObj)}),test("insertAfter(String|Element|Array&lt;Element&gt;|jQuery)",function(){expect(4);var e="This is a normal link: Yahoobuga";jQuery("<b>buga</b>").insertAfter("#yahoo"),equal(jQuery("#en").text(),e,"Insert String after"),QUnit.reset(),e="This is a normal link: YahooTry them out:",jQuery(document.getElementById("first")).insertAfter("#yahoo"),equal(jQuery("#en").text(),e,"Insert element after"),QUnit.reset(),e="This is a normal link: YahooTry them out:diveintomark",jQuery([document.getElementById("first"),document.getElementById("mark")]).insertAfter("#yahoo"),equal(jQuery("#en").text(),e,"Insert array of elements after"),QUnit.reset(),e="This is a normal link: YahoodiveintomarkTry them out:",jQuery("#mark, #first").insertAfter("#yahoo"),equal(jQuery("#en").text(),e,"Insert jQuery after")});var testReplaceWith=function(e){expect(21),jQuery("#yahoo").replaceWith(e("<b id='replace'>buga</b>")),ok(jQuery("#replace")[0],"Replace element with string"),ok(!jQuery("#yahoo")[0],"Verify that original element is gone, after string"),QUnit.reset(),jQuery("#yahoo").replaceWith(e(document.getElementById("first"))),ok(jQuery("#first")[0],"Replace element with element"),ok(!jQuery("#yahoo")[0],"Verify that original element is gone, after element"),QUnit.reset(),jQuery("#qunit-fixture").append("<div id='bar'><div id='baz'</div></div>"),jQuery("#baz").replaceWith("Baz"),equal(jQuery("#bar").text(),"Baz","Replace element with text"),ok(!jQuery("#baz")[0],"Verify that original element is gone, after element"),QUnit.reset(),jQuery("#yahoo").replaceWith(e([document.getElementById("first"),document.getElementById("mark")])),ok(jQuery("#first")[0],"Replace element with array of elements"),ok(jQuery("#mark")[0],"Replace element with array of elements"),ok(!jQuery("#yahoo")[0],"Verify that original element is gone, after array of elements"),QUnit.reset(),jQuery("#yahoo").replaceWith(e(jQuery("#mark, #first"))),ok(jQuery("#first")[0],"Replace element with set of elements"),ok(jQuery("#mark")[0],"Replace element with set of elements"),ok(!jQuery("#yahoo")[0],"Verify that original element is gone, after set of elements"),QUnit.reset();var t=jQuery("<div/>").appendTo("body").click(function(){ok(!0,"Newly bound click run.")}),n=jQuery("<div/>").appendTo("body").click(function(){ok(!0,"Previously bound click run.")}),r=n.append("<b>test</b>").find("b").click(function(){return ok(!0,"Child bound click run."),!1});n.replaceWith(t),t.click(),n.click(),r.click(),t.remove(),n.remove(),r.remove(),QUnit.reset(),n=jQuery("<div/>").appendTo("body").click(function(){ok(!0,"Previously bound click run.")});var a=n.append("<u>test</u>").find("u").click(function(){return ok(!0,"Child 2 bound click run."),!1});n.replaceWith(a),a.click(),n.remove(),a.remove(),QUnit.reset();var i=jQuery("<div/>").replaceWith(e("<span>test</span>"));equal(i[0].nodeName.toLowerCase(),"span","Replace the disconnected node."),equal(i.length,1,"Replace the disconnected node.");var o=jQuery("#does-not-exist").replaceWith(e("<b>should not throw an error</b>"));equal(o.length,0,"Length of non existant element."),jQuery("<div class='replacewith'></div>").appendTo("body"),equal(jQuery(".replacewith").length,1,"Check number of elements in page."),jQuery(".replacewith").remove(),QUnit.reset(),jQuery("#qunit-fixture").append("<div id='replaceWith'></div>"),equal(jQuery("#qunit-fixture").find("div[id=replaceWith]").length,1,"Make sure only one div exists."),jQuery("#replaceWith").replaceWith(e("<div id='replaceWith'></div>")),equal(jQuery("#qunit-fixture").find("div[id=replaceWith]").length,1,"Make sure only one div exists."),jQuery("#replaceWith").replaceWith(e("<div id='replaceWith'></div>")),equal(jQuery("#qunit-fixture").find("div[id=replaceWith]").length,1,"Make sure only one div exists.")};test("replaceWith(String|Element|Array&lt;Element&gt;|jQuery)",function(){testReplaceWith(bareObj)}),test("replaceWith(Function)",function(){testReplaceWith(functionReturningObj),expect(22);var e=jQuery("#yahoo")[0];jQuery(e).replaceWith(function(){equal(this,e,"Make sure the context is coming in correctly.")}),QUnit.reset()}),test("replaceWith(string) for more than one element",function(){expect(3),equal(jQuery("#foo p").length,3,"ensuring that test data has not changed"),jQuery("#foo p").replaceWith("<span>bar</span>"),equal(jQuery("#foo span").length,3,"verify that all the three original element have been replaced"),equal(jQuery("#foo p").length,0,"verify that all the three original element have been replaced")}),test("replaceAll(String|Element|Array&lt;Element&gt;|jQuery)",function(){expect(10),jQuery("<b id='replace'>buga</b>").replaceAll("#yahoo"),ok(jQuery("#replace")[0],"Replace element with string"),ok(!jQuery("#yahoo")[0],"Verify that original element is gone, after string"),QUnit.reset(),jQuery(document.getElementById("first")).replaceAll("#yahoo"),ok(jQuery("#first")[0],"Replace element with element"),ok(!jQuery("#yahoo")[0],"Verify that original element is gone, after element"),QUnit.reset(),jQuery([document.getElementById("first"),document.getElementById("mark")]).replaceAll("#yahoo"),ok(jQuery("#first")[0],"Replace element with array of elements"),ok(jQuery("#mark")[0],"Replace element with array of elements"),ok(!jQuery("#yahoo")[0],"Verify that original element is gone, after array of elements"),QUnit.reset(),jQuery("#mark, #first").replaceAll("#yahoo"),ok(jQuery("#first")[0],"Replace element with set of elements"),ok(jQuery("#mark")[0],"Replace element with set of elements"),ok(!jQuery("#yahoo")[0],"Verify that original element is gone, after set of elements")
}),test("jQuery.clone() (#8017)",function(){expect(2),ok(jQuery.clone&&jQuery.isFunction(jQuery.clone),"jQuery.clone() utility exists and is a function.");var e=jQuery("#qunit-fixture")[0],t=jQuery.clone(e);equal(e.childNodes.length,t.childNodes.length,"Simple child length to ensure a large dom tree copies correctly")}),test("clone() (#8070)",function(){expect(2),jQuery("<select class='test8070'></select><select class='test8070'></select>").appendTo("#qunit-fixture");var e=jQuery(".test8070");e.append("<OPTION>1</OPTION><OPTION>2</OPTION>"),equal(e[0].childNodes.length,2,"First select got two nodes"),equal(e[1].childNodes.length,2,"Second select got two nodes"),e.remove()}),test("clone()",function(){expect(39),equal("This is a normal link: Yahoo",jQuery("#en").text(),"Assert text for #en");var e=jQuery("#yahoo").clone();equal("Try them out:Yahoo",jQuery("#first").append(e).text(),"Check for clone"),equal("This is a normal link: Yahoo",jQuery("#en").text(),"Reassert text for #en");for(var t=["<table/>","<tr/>","<td/>","<div/>","<button/>","<ul/>","<ol/>","<li/>","<input type='checkbox' />","<select/>","<option/>","<textarea/>","<tbody/>","<thead/>","<tfoot/>","<iframe/>"],n=0;n<t.length;n++){var r=jQuery(t[n]);equal(r[0].tagName,r.clone()[0].tagName,"Clone a "+t[n])}var a=jQuery("#nonnodes").contents().clone();ok(a.length>=2,"Check node,textnode,comment clone works (some browsers delete comments on clone)");var i=jQuery("<div><ul><li>test</li></ul></div>").click(function(){ok(!0,"Bound event still exists.")});e=i.clone(!0),i.remove(),i=e.clone(!0),e.remove(),equal(i.length,1,"One element cloned"),equal(i[0].nodeName.toUpperCase(),"DIV","DIV element cloned"),i.trigger("click"),i.remove(),i=jQuery("<div/>").append([document.createElement("table"),document.createElement("table")]),i.find("table").click(function(){ok(!0,"Bound event still exists.")}),e=i.clone(!0),equal(e.length,1,"One element cloned"),equal(e[0].nodeName.toUpperCase(),"DIV","DIV element cloned"),e.find("table:last").trigger("click"),i.remove(),e.remove();var o=jQuery("<div><ul><li>test</li></ul></div>").click(function(){ok(!1,"Bound event still exists after .clone().")}),l=o.clone();l.trigger("click"),l.remove(),o.remove(),i=jQuery("<div/>").html('<embed height="355" width="425" src="http://www.youtube.com/v/3KANI2dpXLw&amp;hl=en"></embed>'),e=i.clone(!0),equal(e.length,1,"One element cloned"),equal(e.html(),i.html(),"Element contents cloned"),equal(e[0].nodeName.toUpperCase(),"DIV","DIV element cloned"),i=jQuery("<div/>").html("<object height='355' width='425' classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'>  <param name='movie' value='http://www.youtube.com/v/3KANI2dpXLw&amp;hl=en'>  <param name='wmode' value='transparent'> </object>"),e=i.clone(!0),equal(e.length,1,"One element cloned"),equal(e[0].nodeName.toUpperCase(),"DIV","DIV element cloned"),i=jQuery("<div/>").html("<object height='355' width='425' type='application/x-shockwave-flash' data='http://www.youtube.com/v/3KANI2dpXLw&amp;hl=en'>  <param name='movie' value='http://www.youtube.com/v/3KANI2dpXLw&amp;hl=en'>  <param name='wmode' value='transparent'> </object>"),e=i.clone(!0),equal(e.length,1,"One element cloned"),equal(e.html(),i.html(),"Element contents cloned"),equal(e[0].nodeName.toUpperCase(),"DIV","DIV element cloned"),i=jQuery("<div/>").data({a:!0}),e=i.clone(!0),equal(e.data("a"),!0,"Data cloned."),e.data("a",!1),equal(e.data("a"),!1,"Ensure cloned element data object was correctly modified"),equal(i.data("a"),!0,"Ensure cloned element data object is copied, not referenced"),i.remove(),e.remove();var s=document.createElement("form");s.action="/test/";var i=document.createElement("div");i.appendChild(document.createTextNode("test")),s.appendChild(i),equal(jQuery(s).clone().children().length,1,"Make sure we just get the form back."),equal(jQuery("body").clone().children()[0].id,"qunit-header","Make sure cloning body works")}),test("clone(form element) (Bug #3879, #6655)",function(){expect(5);var e=jQuery("<select><option>Foo</option><option selected>Bar</option></select>");equal(e.clone().find("option:selected").val(),e.find("option:selected").val(),"Selected option cloned correctly"),e=jQuery("<input type='checkbox' value='foo'>").attr("checked","checked"),clone=e.clone(),equal(clone.is(":checked"),e.is(":checked"),"Checked input cloned correctly"),equal(clone[0].defaultValue,"foo","Checked input defaultValue cloned correctly"),e=jQuery("<input type='text' value='foo'>"),clone=e.clone(),equal(clone[0].defaultValue,"foo","Text input defaultValue cloned correctly"),e=jQuery("<textarea>foo</textarea>"),clone=e.clone(),equal(clone[0].defaultValue,"foo","Textarea defaultValue cloned correctly")}),test("clone(multiple selected options) (Bug #8129)",function(){expect(1);var e=jQuery("<select><option>Foo</option><option selected>Bar</option><option selected>Baz</option></select>");equal(e.clone().find("option:selected").length,e.find("option:selected").length,"Multiple selected options cloned correctly")}),isLocal||test("clone() on XML nodes",function(){expect(2),stop(),jQuery.get("data/dashboard.xml",function(e){var t=jQuery(e.documentElement).clone(),n=jQuery("tab",e).eq(0),r=jQuery("tab",t).eq(0);n.text("origval"),r.text("cloneval"),equal(n.text(),"origval","Check original XML node was correctly set"),equal(r.text(),"cloneval","Check cloned XML node was correctly set"),start()})});var testHtml=function(e){expect(34),jQuery.scriptorder=0;var t=jQuery("#qunit-fixture > div");t.html(e("<b>test</b>"));for(var n=!0,r=0;r<t.size();r++)1!=t.get(r).childNodes.length&&(n=!1);ok(n,"Set HTML"),t=jQuery("<div/>").html(e("<div id='parent_1'><div id='child_1'/></div><div id='parent_2'/>")),equal(t.children().length,2,"Make sure two child nodes exist."),equal(t.children().children().length,1,"Make sure that a grandchild exists.");var a=jQuery("<div/>").html(e("&#160;"))[0].innerHTML;ok(/^\xA0$|^&nbsp;$/.test(a),"Make sure entities are passed through correctly."),equal(jQuery("<div/>").html(e("&amp;"))[0].innerHTML,"&amp;","Make sure entities are passed through correctly."),jQuery("#qunit-fixture").html(e("<style>.foobar{color:green;}</style>")),equal(jQuery("#qunit-fixture").children().length,1,"Make sure there is a child element."),equal(jQuery("#qunit-fixture").children()[0].nodeName.toUpperCase(),"STYLE","And that a style element was inserted."),QUnit.reset();var i=jQuery("#nonnodes").contents();i.html(e("<b>bold</b>")),i.find("b").removeData(),equal(i.html().replace(/ xmlns="[^"]+"/g,"").toLowerCase(),"<b>bold</b>","Check node,textnode,comment with html()"),jQuery("#qunit-fixture").html(e("<select/>")),jQuery("#qunit-fixture select").html(e("<option>O1</option><option selected='selected'>O2</option><option>O3</option>")),equal(jQuery("#qunit-fixture select").val(),"O2","Selected option correct");var o=jQuery("<div />");equal(o.html(e(5)).html(),"5","Setting a number as html"),equal(o.html(e(0)).html(),"0","Setting a zero as html");var l=jQuery("<div/>"),s="&lt;div&gt;hello1&lt;/div&gt;";equal(l.html(s).html().replace(/>/g,"&gt;"),s,"Verify escaped insertion."),equal(l.html("x"+s).html().replace(/>/g,"&gt;"),"x"+s,"Verify escaped insertion."),equal(l.html(" "+s).html().replace(/>/g,"&gt;")," "+s,"Verify escaped insertion.");var u=jQuery("<map/>").html(e("<area id='map01' shape='rect' coords='50,50,150,150' href='http://www.jquery.com/' alt='jQuery'>"));equal(u[0].childNodes.length,1,"The area was inserted."),equal(u[0].firstChild.nodeName.toLowerCase(),"area","The area was inserted."),QUnit.reset(),jQuery("#qunit-fixture").html(e("<script type='something/else'>ok( false, 'Non-script evaluated.' );</script><script type='text/javascript'>ok( true, 'text/javascript is evaluated.' );</script><script>ok( true, 'No type is evaluated.' );</script><div><script type='text/javascript'>ok( true, 'Inner text/javascript is evaluated.' );</script><script>ok( true, 'Inner No type is evaluated.' );</script><script type='something/else'>ok( false, 'Non-script evaluated.' );</script></div>"));var c=jQuery("#qunit-fixture").find("script");equal(c.length,2,"Make sure that two non-JavaScript script tags are left."),equal(c[0].type,"something/else","Verify type of script tag."),equal(c[1].type,"something/else","Verify type of script tag."),jQuery("#qunit-fixture").html(e("<script>ok( true, 'Test repeated injection of script.' );</script>")),jQuery("#qunit-fixture").html(e("<script>ok( true, 'Test repeated injection of script.' );</script>")),jQuery("#qunit-fixture").html(e("<script>ok( true, 'Test repeated injection of script.' );</script>")),jQuery("#qunit-fixture").html(e("<script type='text/javascript'>ok( true, 'jQuery().html().evalScripts() Evals Scripts Twice in Firefox, see #975 (1)' );</script>")),jQuery("#qunit-fixture").html(e("foo <form><script type='text/javascript'>ok( true, 'jQuery().html().evalScripts() Evals Scripts Twice in Firefox, see #975 (2)' );</script></form>")),jQuery("#qunit-fixture").html(e("<script>equal(jQuery.scriptorder++, 0, 'Script is executed in order');equal(jQuery('#scriptorder').length, 1,'Execute after html (even though appears before)')</script><span id='scriptorder'><script>equal(jQuery.scriptorder++, 1, 'Script (nested) is executed in order');equal(jQuery('#scriptorder').length, 1,'Execute after html')</script></span><script>equal(jQuery.scriptorder++, 2, 'Script (unnested) is executed in order');equal(jQuery('#scriptorder').length, 1,'Execute after html')</script>"))};test("html(String)",function(){testHtml(bareObj)}),test("html(Function)",function(){testHtml(functionReturningObj),expect(36),QUnit.reset(),jQuery("#qunit-fixture").html(function(){return jQuery(this).text()}),ok(!/</.test(jQuery("#qunit-fixture").html()),"Replace html with text."),ok(jQuery("#qunit-fixture").html().length>0,"Make sure text exists.")}),test("html(Function) with incoming value",function(){expect(20);var e=jQuery("#qunit-fixture > div"),t=e.map(function(){return jQuery(this).html()});e.html(function(e,n){return equal(n,t[e],"Make sure the incoming value is correct."),"<b>test</b>"});var n=!0;e.each(function(){1!==this.childNodes.length&&(n=!1)}),ok(n,"Set HTML"),QUnit.reset();var r=jQuery("#nonnodes").contents();t=r.map(function(){return jQuery(this).html()}),r.html(function(e,n){return equal(n,t[e],"Make sure the incoming value is correct."),"<b>bold</b>"}),2===r.length&&equal(null,null,"Make sure the incoming value is correct."),r.find("b").removeData(),equal(r.html().replace(/ xmlns="[^"]+"/g,"").toLowerCase(),"<b>bold</b>","Check node,textnode,comment with html()");var a=jQuery("<div />");equal(a.html(function(e,t){return equal(t,"","Make sure the incoming value is correct."),5}).html(),"5","Setting a number as html"),equal(a.html(function(e,t){return equal(t,"5","Make sure the incoming value is correct."),0}).html(),"0","Setting a zero as html");var i=jQuery("<div/>"),o="&lt;div&gt;hello1&lt;/div&gt;";equal(i.html(function(e,t){return equal(t,"","Make sure the incoming value is correct."),o}).html().replace(/>/g,"&gt;"),o,"Verify escaped insertion."),equal(i.html(function(e,t){return equal(t.replace(/>/g,"&gt;"),o,"Make sure the incoming value is correct."),"x"+o}).html().replace(/>/g,"&gt;"),"x"+o,"Verify escaped insertion."),equal(i.html(function(e,t){return equal(t.replace(/>/g,"&gt;"),"x"+o,"Make sure the incoming value is correct.")," "+o}).html().replace(/>/g,"&gt;")," "+o,"Verify escaped insertion.")});var testRemove=function(e){expect(9);var t=jQuery("#ap").children(":first");t.data("foo","bar"),jQuery("#ap").children()[e](),ok(jQuery("#ap").text().length>10,"Check text is not removed"),equal(jQuery("#ap").children().length,0,"Check remove"),equal(t.data("foo"),"remove"==e?null:"bar"),QUnit.reset(),jQuery("#ap").children()[e]("a"),ok(jQuery("#ap").text().length>10,"Check text is not removed"),equal(jQuery("#ap").children().length,1,"Check filtered remove"),jQuery("#ap").children()[e]("a, code"),equal(jQuery("#ap").children().length,0,"Check multi-filtered remove"),ok(jQuery("#nonnodes").contents().length>=2,"Check node,textnode,comment remove works"),jQuery("#nonnodes").contents()[e](),equal(jQuery("#nonnodes").contents().length,0,"Check node,textnode,comment remove works"),"detach"===e&&t.remove(),QUnit.reset();var n=0,t=jQuery("#ap").children(":first"),r=t.click(function(){n++})[e]().appendTo("#qunit-fixture").click();equal("remove"==e?0:1,n),r.remove()};test("remove()",function(){testRemove("remove")}),test("detach()",function(){testRemove("detach")}),test("empty()",function(){expect(3),equal(jQuery("#ap").children().empty().text().length,0,"Check text is removed"),equal(jQuery("#ap").children().length,4,"Check elements are not removed");var e=jQuery("#nonnodes").contents();e.empty(),equal(e.html(),"","Check node,textnode,comment empty works")}),test("jQuery.cleanData",function(){function e(){var e=jQuery("<div class='outer'><div class='inner'></div></div>").click(function(){ok(!0,t+" "+n+" Click event fired.")}).focus(function(){ok(!0,t+" "+n+" Focus event fired.")}).find("div").click(function(){ok(!1,t+" "+n+" Click event fired.")}).focus(function(){ok(!1,t+" "+n+" Focus event fired.")}).end().appendTo("body");return e[0].detachEvent=e[0].removeEventListener=function(e){ok(!0,t+" Outer "+e+" event unbound")},e[0].firstChild.detachEvent=e[0].firstChild.removeEventListener=function(e){ok(!0,t+" Inner "+e+" event unbound")},e}expect(14);var t,n,r,a;t="remove",r=e().remove(),n="Outer",r.trigger("click"),n="Inner",r.children().trigger("click"),t="empty",r=e(),a=r.children(),r.empty(),n="Outer",r.trigger("click"),n="Inner",a.trigger("click"),r.remove(),t="html",r=e(),a=r.children(),r.html("<div></div>"),n="Outer",r.trigger("click"),n="Inner",a.trigger("click"),r.remove()}),test("jQuery.buildFragment - no plain-text caching (Bug #6779)",function(){expect(1);for(var e=jQuery("<div />").appendTo("#qunit-fixture"),t=["start-","toString","hasOwnProperty","append","here&there!","-end"],n=0;n<t.length;n++)try{e.append(t[n])}catch(r){}equal(e.text(),t.join(""),"Cached strings that match Object properties"),e.remove()}),test("jQuery.html - execute scripts escaped with html comment or CDATA (#9221)",function(){expect(3),jQuery(['<script type="text/javascript">',"<!--",'ok( true, "<!-- handled" );',"//-->","</script>"].join("\n")).appendTo("#qunit-fixture"),jQuery(['<script type="text/javascript">',"<![CDATA[",'ok( true, "<![CDATA[ handled" );',"//]]>","</script>"].join("\n")).appendTo("#qunit-fixture"),jQuery(['<script type="text/javascript">',"<!--//--><![CDATA[//><!--",'ok( true, "<!--//--><![CDATA[//><!-- (Drupal case) handled" );',"//--><!]]>","</script>"].join("\n")).appendTo("#qunit-fixture")}),test("jQuery.buildFragment - plain objects are not a document #8950",function(){expect(1);try{jQuery('<input type="hidden">',{}),ok(!0,"Does not allow attribute object to be treated like a doc object")}catch(e){}}),test("jQuery.clone - no exceptions for object elements #9587",function(){expect(1);try{jQuery("#no-clone-exception").clone(),ok(!0,"cloned with no exceptions")}catch(e){ok(!1,e.message)}}),test("jQuery(<tag>) & wrap[Inner/All]() handle unknown elems (#10667)",function(){expect(2);var e=jQuery("<div id='wrap-target'>Target</div>").appendTo("#qunit-fixture"),t=jQuery("<section>").appendTo("#qunit-fixture");e.wrapAll("<aside style='background-color:green'></aside>"),notEqual(e.parent("aside").css("background-color"),"transparent","HTML5 elements created with wrapAll inherit styles"),notEqual(t.css("background-color"),"transparent","HTML5 elements create with jQuery( string ) inherit styles")}),test("Cloned, detached HTML5 elems (#10667,10670)",function(){expect(7);var e,t=jQuery("<section>").appendTo("#qunit-fixture");e=t.clone(),e[0].outerHTML&&!jQuery.support.opacity?equal(e[0].outerHTML,"<section></section>","detached clone outerHTML matches '<section></section>'"):equal(e[0].nodeName,"SECTION","detached clone nodeName matches 'SECTION' in modern browsers"),t.bind("click",function(){ok(!0,"clone fired event")}),e=t.clone(!0),e.trigger("click"),e.unbind("click"),t.append("<p>Hello</p>"),e=t.clone(!0),equal(e.find("p").text(),"Hello","Assert text in child of clone"),e.trigger("click"),e.unbind("click"),t.attr({"class":"foo bar baz",title:"This is a title"}),e=t.clone(!0),equal(e.attr("class"),t.attr("class"),"clone and element have same class attribute"),equal(e.attr("title"),t.attr("title"),"clone and element have same title attribute"),t.remove(),t=e.clone(!0),e.remove(),t.trigger("click"),t.unbind("click"),e.unbind("click")}),test("jQuery.fragments cache expectations",function(){function e(){var e,t=0;for(e in jQuery.fragments)t++;return t}expect(10),jQuery.fragments={},jQuery("<li></li>"),jQuery("<li>?</li>"),jQuery("<li>whip</li>"),jQuery("<li>it</li>"),jQuery("<li>good</li>"),jQuery("<div></div>"),jQuery("<div><div><span></span></div></div>"),jQuery("<tr><td></td></tr>"),jQuery("<tr><td></tr>"),jQuery("<li>aaa</li>"),jQuery("<ul><li>?</li></ul>"),jQuery("<div><p>arf</p>nnn</div>"),jQuery("<div><p>dog</p>?</div>"),jQuery("<span><span>"),equal(e(),12,"12 entries exist in jQuery.fragments, 1"),jQuery.each(["<tr><td></td></tr>","<ul><li>?</li></ul>","<div><p>dog</p>?</div>","<span><span>"],function(e,t){jQuery(t),equal(jQuery.fragments[t].nodeType,11,"Second call with "+t+" creates a cached DocumentFragment, has nodeType 11"),ok(jQuery.fragments[t].childNodes.length,"Second call with "+t+" creates a cached DocumentFragment, has childNodes with length")}),equal(e(),12,"12 entries exist in jQuery.fragments, 2")});